# Mysql 환경 설정 > my.cnf


## > /etc/my.cnf 

```
[client-server]
#
# include all files from the config directory
#
!includedir /etc/my.cnf.d
```


## > ls -al /etc/my.cnf.d 

```
-rw-r--r--.   1 root root   295 Jan 18  2017 client.cnf
-rw-r--r--.   1 root root   763 Jan 18  2017 enable_encryption.preset
-rw-r--r--.   1 root root   232 Jan 18  2017 mysql-clients.cnf
-rw-r--r--.   1 root root  5721 Oct  3 16:56 mysql-innodb.cnf
-rw-r--r--.   1 root root  1080 Jan 18  2017 server.cnf
-rw-r--r--.   1 root root   342 Oct  3 15:50 tokudb.cnf
```

## >client.cnf
```
#
# These two groups are read by the client library
# Use it for options that affect all clients, but not the server
#
```

## (/etc/my.cnf.d/client)
```
# This group is not read by mysql client library,
# If you use the same .cnf file for MySQL and MariaDB,
# use it for MariaDB-only client options
[client-mariadb]
```

## (enable_encryption.preset)
```
#
# !include this file into your my.cnf (or any of *.cnf files in /etc/my.cnf.d)
# and it will enable data at rest encryption. This is a simple way to
# ensure that everything that can be encrypted will be and your
# data will not leak unencrypted.
#
# DO NOT EDIT THIS FILE! On MariaDB upgrades it might be replaced with a
# newer version and your edits will be lost. Instead, add your edits
# to the .cnf file after the !include directive.
#
# NOTE that you also need to install an encryption plugin for the encryption
# to work. See https://mariadb.com/kb/en/mariadb/data-at-rest-encryption/#encryption-key-management
#
[mariadb]
aria-encrypt-tables
encrypt-binlog
encrypt-tmp-disk-tables
encrypt-tmp-files
loose-innodb-encrypt-log
loose-innodb-encrypt-tables
```

##(mysql-clients.cnf)
```

[mysql]

[mysql_upgrade]

[mysqladmin]

[mysqlbinlog]

[mysqlcheck]

[mysqldump]

[mysqlimport]

[mysqlshow]

[mysqlslap]
```

## (mysql-innodb.cnf)
```
# MariaDB client library initialization.
# REF : /usr/share/mysql/my-innodb-heavy-4G.cnf

[client]
#password       = [your_password]
port            = 3306
socket          = /var/lib/mysql/mysql.sock

# *** Application-specific options follow here ***

#
# The MariaDB server
#
[mysqld]

# generic configuration options
port            = 3306
socket          = /var/lib/mysql/mysql.sock

datadir = /data/MyDB
back_log = 50

# The directory used by MySQL for storing temporary files. For example, : tmpdir
# Maximum size for internal (in-memory) temporary tables.               : tmp_table_size
tmp_table_size = 32M
#tmpdir = /tmp

max_connections = 100
max_connect_errors = 10
table_open_cache = 2048


# The maximum size of a query packet the server can handle as well as   : max_allowed_packet
# transactions you can increase this value to get more performance.     : binlog_cache_size
# Maximum allowed size for a single HEAP (in memory) table. This option : max_heap_table_size
# Size of the buffer used for doing full table scans .                  : read_buffer_size
# through this buffer to avoid disk seeks. You can improve ORDER BY     : read_rnd_buffer_size
# Sort buffer is used to perform sorts for some ORDER BY and GROUP BY   : sort_buffer_size
# This buffer is used for the optimization of full JOINs                : join_buffer_size
# How many threads we should keep in a cache for reuse. When a client   : thread_cache_size
# Query cache is used to cache SELECT results and later return them     : query_cache_size
# To protect the query cache of a very large result set overwriting     : query_cache_limit
# use amount of memory is always reserved at connection time. MariaDB needs 64K  : thread_stack
max_allowed_packet = 4M
binlog_cache_size = 1M
max_heap_table_size = 8M
read_buffer_size = 2M
read_rnd_buffer_size = 4M
sort_buffer_size = 2M
join_buffer_size = 2M
thread_cache_size = 2
query_cache_size = 8M
query_cache_limit = 2M
thread_stack = 240K

# Minimum word length to be indexed by the full text search index.      : ft_min_word_len
# to avoid potential swapping out in case of high memory pressure. Good : memlock
# specified differently during the CREATE TABLE statement. : default-storage-engine
ft_min_word_len = 4
#memlock
default-storage-engine = MYISAM


# Set the default transaction isolation level. Levels available are:
# READ-UNCOMMITTED, READ-COMMITTED, REPEATABLE-READ, SERIALIZABLE
transaction_isolation = REPEATABLE-READ


# Enable binary logging. This is required for acting as a MASTER      : log-bin
# binary logging format - mixed recommended                           : binlog_format
# the slave thread into the slave's binary log.                       : log_slave_updates
# Enable the full query log. Every query                              : log
# Print warnings to the error log file.  If you have any problem with : log_warnings
# Log slow queries. Slow queries are queries which take more than the : slow_query_log
# All queries taking more than this amount of time (in seconds)       : long_query_time

#log-bin=mysql-bin
log-bin=/data/MyLogs/mysql-bin
binlog_format=mixed

#log_slave_updates
#log
#log_warnings
slow_query_log
long_query_time = 10


# ***  Replication related settings

# Unique server identification number between 1 and 2^32-1. This value
# is required for both master and slave hosts. It defaults to 1 if
# "master-host" is not set, but will MariaDB will not function as a master
# if it is omitted.
server-id = 1

#*** MyISAM Specific options

# Size of the Key Buffer, used to cache index blocks for MyISAM tables.       : key_buffer_size
# MyISAM uses special tree-like cache to make bulk inserts                    : bulk_insert_buffer_size
# This buffer is allocated when MariaDB needs to rebuild the index in         : myisam_sort_buffer_size
# The maximum size of the temporary file MariaDB is allowed to use while      : myisam_max_sort_file_size
# Automatically check and repair not properly closed MyISAM tables.           : myisam_repair_threads
# Automatically recovery mode of MyISAM tables.                               : myisam_repair_threads
key_buffer_size = 8M
bulk_insert_buffer_size = 8M
myisam_sort_buffer_size = 16M
myisam_max_sort_file_size = 1G
myisam_repair_threads = 1
myisam-recover-options = DEFAULT

# *** INNODB Specific options ***

# Use this option if you have a MariaDB server with InnoDB support enabled
#skip-innodb

# Additional memory pool that is used by InnoDB to store metadata
# information.  If InnoDB requires more memory for this purpose it will
innodb_additional_mem_pool_size = 8M
innodb_buffer_pool_size = 256M
innodb_data_file_path = ibdata1:50M:autoextend
innodb_data_home_dir = /data/MyDB
innodb_file_per_table = ON

innodb_write_io_threads = 2
innodb_read_io_threads = 2
innodb_log_buffer_size = 4M
innodb_log_file_size = 16M
innodb_flush_log_at_trx_commit = 1
innodb_max_dirty_pages_pct = 90
innodb_lock_wait_timeout = 120

innodb_log_files_in_group = 3
innodb_log_group_home_dir = /data/MyDB

#innodb_force_recovery=1
# innodb_thread_concurrency = 4 # DEPRECATED  10.1
#innodb_flush_method=O_DSYNC
#innodb_fast_shutdown


[mysqldump]
# Do not buffer the whole result set in memory before writing it to
# file. Required for dumping very large tables
quick

max_allowed_packet = 8M

[mysql]
no-auto-rehash

# Only allow UPDATEs and DELETEs that use keys.
#safe-updates

[myisamchk]
key_buffer_size = 32M
sort_buffer_size = 32M
read_buffer = 4M
write_buffer = 4M

[mysqlhotcopy]
interactive-timeout

[mysqld_safe]
# Increase the amount of open files allowed per process. Warning: Make
# sure you have set the global system limit high enough! The high value
# is required for a large number of opened tables
open-files-limit = 8192
```


## (server.cnf)
```
#
# These groups are read by MariaDB server.
# Use it for options that only the server (but not clients) should see
#
# See the examples of server my.cnf files in /usr/share/mysql/
#

# this is read by the standalone daemon and embedded servers
[server]

# this is only for the mysqld standalone daemon
[mysqld]

#
# * Galera-related settings
#
[galera]
# Mandatory settings
#wsrep_on=ON
#wsrep_provider=
#wsrep_cluster_address=
#binlog_format=row
#default_storage_engine=InnoDB
#innodb_autoinc_lock_mode=2
#
# Allow server to accept connections on all interfaces.
#
#bind-address=0.0.0.0
#
# Optional setting
#wsrep_slave_threads=1
#innodb_flush_log_at_trx_commit=0

# this is only for embedded server
[embedded]

# This group is only read by MariaDB servers, not by MySQL.
# If you use the same .cnf file for MySQL and MariaDB,
# you can put MariaDB-only options here
[mariadb]

# This group is only read by MariaDB-10.1 servers.
# If you use the same .cnf file for MariaDB of different versions,
# use this group for options that older servers don't understand
[mariadb-10.1]


```


## (tokudb.cnf)

```

[mariadb]
# See https://mariadb.com/kb/en/how-to-enable-tokudb-in-mariadb/
# for instructions how to enable TokuDB
#
# See https://mariadb.com/kb/en/tokudb-differences/ for differences
# between TokuDB in MariaDB and TokuDB from http://www.tokutek.com/

#SQL>INSTALL SONAME 'ha_tokudb';

#plugin-load-add=ha_tokudb.so

plugin-load=ha_tokudb

```


